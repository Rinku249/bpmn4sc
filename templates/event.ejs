template <%= parent.id %> 
    with
        <%= parent.signatory %> : Party
        done : Bool
        last : <%- last.id %>
    where
        signatory <%= parent.signatory %>

<% children.forEach((child,index) => { %>
        nonconsuming choice <%-child.id -%>  : ()
            controller <%= parent.signatory %>
            do
                if last.done then do
                    let this.done = True
                    exercise self Archive
                else do
                    return ()<% }) %>    